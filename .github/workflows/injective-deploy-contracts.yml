# .github/workflows/injective-deploy-contracts.yml

name: Injective Daily Contract Deployment

on:
  schedule:
    # Ù‡Ø± 30 Ø¯Ù‚ÛŒÙ‚Ù‡ ÛŒÚ© Ø¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯
    - cron: '*/30 * * * *' 
  workflow_dispatch: # Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ

jobs:
  deploy-contracts:
    runs-on: ubuntu-latest
    
    env:
      INJECTIVE_PRIVATE_KEY: ${{ secrets.INJECTIVE_PRIVATE_KEY }} # Ù†Ø§Ù… Secret ØµØ­ÛŒØ­

    steps:
      - name: â¬‡ï¸ Checkout Repository
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: ğŸ“¦ Install Python Dependencies
        run: pip install -r requirements.txt # web3.py, solcx, pytz, python-dotenv Ù†ØµØ¨ Ù…ÛŒØ´Ù†

      # **Ù…Ù‡Ù…:** Ù†ØµØ¨ OpenZeppelin Contracts Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ MyNFT.sol
      # Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„Ø± Solidity Ø¨ØªÙˆÙ†Ù‡ @openzeppelin/contracts Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù‡ØŒ Ø¶Ø±ÙˆØ±ÛŒÙ‡.
      - name: ğŸ“¦ Install OpenZeppelin Contracts (for Solidity imports)
        run: |
          npm install @openzeppelin/contracts # npm Ø¯Ø± Ù…Ø­ÛŒØ· GitHub Actions Ù…ÙˆØ¬ÙˆØ¯Ù‡
        # Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ working-directory Ù†ÛŒØ³Øª Ø§Ú¯Ø± Ø¯Ø± Ø±ÛŒØ´Ù‡ Ù†ØµØ¨ Ø´ÙˆØ¯ Ùˆ solcx Ø¨ØªÙˆØ§Ù†Ø¯ Ø¢Ù† Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯.

      - name: ğŸš€ Run Contract Deployment Script
        run: python scripts/deploy_contracts.py
