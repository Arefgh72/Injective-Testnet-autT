# .github/workflows/injective-deploy-contracts.yml

name: Injective Daily Contract Deployment

on:
  schedule:
    # Ù‡Ø± 30 Ø¯Ù‚ÛŒÙ‚Ù‡ ÛŒÚ© Ø¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯
    - cron: '*/30 * * * *' 
  workflow_dispatch: # Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ

jobs:
  deploy-contracts:
    runs-on: ubuntu-latest
    
    env:
      INJECTIVE_PRIVATE_KEY: ${{ secrets.INJECTIVE_PRIVATE_KEY }}

    steps:
      - name: â¬‡ï¸ Checkout Repository
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.9' # ØªØºÛŒÛŒØ± Ø¨Ù‡ Ù¾Ø§ÛŒØªÙˆÙ† 3.9 (pysolcx Ø¨Ø§ 3.9 Ø¨Ù‡ØªØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯)

      - name: ğŸ“¦ Install Python Dependencies
        # Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ pysolcx Ùˆ Ø¨Ù‚ÛŒÙ‡ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ Ø±Ùˆ Ù†ØµØ¨ Ù…ÛŒâ€ŒÚ©Ù†Ù‡
        run: pip install -r requirements.txt 

      # **Ù…Ù‡Ù…:** Ù†ØµØ¨ OpenZeppelin Contracts Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ MyNFT.sol
      # Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„Ø± Solidity Ø¨ØªÙˆÙ†Ù‡ @openzeppelin/contracts Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù‡ØŒ Ø¶Ø±ÙˆØ±ÛŒÙ‡.
      - name: ğŸ“¦ Install OpenZeppelin Contracts (for Solidity imports)
        run: |
          npm install @openzeppelin/contracts 
        working-directory: ${{ github.workspace }} # Ø¯Ø± Ø±ÛŒØ´Ù‡ Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ Ù†ØµØ¨ Ø´ÙˆØ¯

      - name: ğŸš€ Run Contract Deployment Script
        run: python scripts/deploy_contracts.py
