# .github/workflows/injective-deploy-contracts.yml

name: Injective Daily Contract Deployment

on:
  schedule:
    - cron: '*/30 * * * *' 
  workflow_dispatch:

jobs:
  deploy-contracts:
    runs-on: ubuntu-latest
    
    env:
      INJECTIVE_PRIVATE_KEY: ${{ secrets.INJECTIVE_PRIVATE_KEY }}

    steps:
      - name: â¬‡ï¸ Checkout Repository
        uses: actions/checkout@v4
        
      - name: ğŸ› ï¸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.9' # ØªØºÛŒÛŒØ± Ø¨Ù‡ Ù¾Ø§ÛŒØªÙˆÙ† 3.9 (Ù†Ø³Ø®Ù‡â€ŒØ§ÛŒ Ú©Ù‡ solcx Ø¨Ù‡ØªØ± Ø¨Ø§Ù‡Ø§Ø´ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡)

      - name: ğŸ“¦ Install Python Dependencies
        run: pip install -r requirements.txt # web3.py, pytz, python-dotenv Ù†ØµØ¨ Ù…ÛŒØ´Ù†

      - name: ğŸ”§ Install solcx
        run: pip install solcx # solcx Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø³ØªÙ‚Ù„ Ù†ØµØ¨ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… (ÙˆØ±Ú˜Ù† Ø¬Ø¯ÛŒØ¯ Ø®ÙˆØ¯Ø´ Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ù‡)

      # Ù†ØµØ¨ OpenZeppelin Contracts (Ø¨Ø±Ø§ÛŒ Solidity imports) - Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø³Ø±Ø¬Ø§Ø´ Ù…ÛŒâ€ŒÙ…ÙˆÙ†Ù‡
      - name: ğŸ“¦ Install OpenZeppelin Contracts (for Solidity imports)
        run: |
          npm install @openzeppelin/contracts 

      - name: ğŸš€ Run Contract Deployment Script
        run: python scripts/deploy_contracts.py
