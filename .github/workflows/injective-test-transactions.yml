# .github/workflows/injective-test-transactions.yml

name: Injective Manual Test Transactions # نام این Workflow

on:
  workflow_dispatch: # این به شما امکان می‌دهد تا Workflow را به صورت دستی از تب "Actions" اجرا کنید

jobs:
  test-transactions:
    runs-on: ubuntu-latest # سیستم عاملی که Job روی آن اجرا می‌شود
    
    # متغیرهای محیطی که برای اسکریپت Node.js نیاز داریم
    env:
      INJECTIVE_PRIVATE_KEY: ${{ secrets.INJECTIVE_PRIVATE_KEY }} # کلید خصوصی شما از GitHub Secrets
      TEST_MODE: 'true' # این خط حالت تست را در اسکریپت فعال می‌کند

    steps:
      - name: ⬇️ Checkout Repository
        uses: actions/checkout@v4 # برای دسترسی به فایل‌های ریپازیتوری
        
      - name: 🛠️ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # از Node.js نسخه 20 استفاده شود

      - name: 📦 Install Dependencies
        run: npm install # نصب وابستگی‌های تعریف شده در package.json

      - name: 📂 Create data directory if not exists
        run: mkdir -p data # اطمینان از وجود دایرکتوری data (جایی که swap-outputs.json قرار می‌گیرد)
        
      - name: 🚀 Run All Injective Transactions (Test Mode)
        run: npm start # اجرای اسکریپت Node.js شما
